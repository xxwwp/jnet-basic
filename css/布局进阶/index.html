<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 3.0.2"/><title data-react-helmet="true"></title><link data-react-helmet="true" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/themes/prism-tomorrow.css"/><link as="script" rel="preload" href="/jnet-basic-v2/webpack-runtime-a52939d631f5cc604aea.js"/><link as="script" rel="preload" href="/jnet-basic-v2/framework-e8e53ba50a7a1b0850f7.js"/><link as="script" rel="preload" href="/jnet-basic-v2/app-38218a2ef72326a75367.js"/><link as="script" rel="preload" href="/jnet-basic-v2/1512ff2dbf77859a0dcbee24710e2018e282937f-369ee37846485c1e14f7.js"/><link as="script" rel="preload" href="/jnet-basic-v2/component---src-templates-docs-tsx-3f6722c11400634ddec5.js"/><link as="fetch" rel="preload" href="/jnet-basic-v2/page-data/css/布局进阶/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/jnet-basic-v2/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css-global b48ifx">body{margin:0;}html,body{overflow-x:hidden;}</style><style data-emotion="css-global 1vo6k5w">body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";color:#303133;}</style><style data-emotion="css zdq125">.css-zdq125{position:fixed;left:0;top:0;bottom:0;-webkit-transition:-webkit-transform 0.3s,opacity 0.3s;transition:transform 0.3s,opacity 0.3s;overflow:hidden;z-index:10;}@media screen and (min-width: 1200px){.css-zdq125:hover{overflow:auto;overflow:overlay;}}@media screen and (max-width: 1200px){.css-zdq125{opacity:0;-webkit-transform:translateX(-100%);-moz-transform:translateX(-100%);-ms-transform:translateX(-100%);transform:translateX(-100%);}.css-zdq125.active{opacity:1;-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);overflow:auto;overflow:overlay;}.css-zdq125 nav{width:100vw;}}</style><aside class=" css-zdq125"><style data-emotion="css k4cgyt">.css-k4cgyt{width:200px;overflow:hidden;padding:10px 0px 50px;border-right:4px double rgba(0, 0, 0, 0.1);min-height:100%;background:#fff;}.css-k4cgyt .title{text-align:center;}.css-k4cgyt .title a{line-height:40px;color:#c0c0c0;-webkit-text-decoration:none;text-decoration:none;font-size:1.5em;}</style><nav class="css-k4cgyt"><div class="title"><a href="/jnet-basic-v2/">JNet Basic</a></div><style data-emotion="css smzts4">.css-smzts4 ol{list-style:none;padding-left:20px;margin:0;}.css-smzts4 ol ol{padding-left:10px;}.css-smzts4 ol li{line-height:30px;margin:0;}.css-smzts4 ol a{color:#555;-webkit-text-decoration:none;text-decoration:none;line-height:30px;}.css-smzts4 ol a:hover,.css-smzts4 ol a.current{color:#999;}</style><div class="css-smzts4"><ol><li><style data-emotion="css opu5s9">.css-opu5s9.active{color:#999;}</style><a class="css-opu5s9" href="/jnet-basic-v2/课程介绍">课程介绍</a></li><li><span>html</span><ol><li><a class="css-opu5s9" href="/jnet-basic-v2/html/概述">概述</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/html/基础理论">基础理论</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/html/头部学习">头部学习</a></li><li><span>元素学习</span><ol><li><a class="css-opu5s9" href="/jnet-basic-v2/html/元素学习/文章相关的元素">文章相关的元素</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/html/元素学习/超链接与图片">超链接与图片</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/html/元素学习/无语义元素">无语义元素</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/html/元素学习/表格">表格</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/html/元素学习/表单元素">表单元素</a></li></ol></li><li><a class="css-opu5s9" href="/jnet-basic-v2/html/属性">属性</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/html/补充与结束">补充与结束</a></li></ol></li><li><span>css</span><ol><li><a class="css-opu5s9" href="/jnet-basic-v2/css/概述">概述</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/css/选择器">选择器</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/css/核心概念-层叠，继承，优先级">核心概念-层叠，继承，优先级</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/css/盒模型与文档流">盒模型与文档流</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/css/文本处理">文本处理</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/css/表格处理">表格处理</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/css/背景处理">背景处理</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/css/杂项">杂项</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/css/基础布局">基础布局</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/css/布局进阶">布局进阶</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/css/常见布局练习">常见布局练习</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/css/补充与结束">补充与结束</a></li></ol></li><li><span>js</span><ol><li><a class="css-opu5s9" href="/jnet-basic-v2/js/程序引导课">程序引导课</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/js/基础">基础</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/js/数据、运算符和表达式">数据、运算符和表达式</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/js/函数和作用域">函数和作用域</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/js/引用类型">引用类型</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/js/流程控制">流程控制</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/js/类型判断与类型转换">类型判断与类型转换</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/js/函数深入">函数深入</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/js/常用_API">常用_API</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/js/异步编程">异步编程</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/js/提升">提升</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/js/闭包">闭包</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/js/this_关键字">this_关键字</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/js/对象原型">对象原型</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/js/面向对象">面向对象</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/js/DOM">DOM</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/js/事件">事件</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/js/BOM">BOM</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/js/渲染与加载">渲染与加载</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/js/错误处理">错误处理</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/js/严格模式">严格模式</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/js/正则字符串">正则字符串</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/js/网络简述">网络简述</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/js/杂项">杂项</a></li></ol></li><li><a class="css-opu5s9" href="/jnet-basic-v2/总练习">总练习</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/课程总结">课程总结</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/素材">素材</a></li></ol></div></nav></aside><style data-emotion="css 1308utl">.css-1308utl{position:fixed;right:1rem;bottom:1rem;z-index:100;background-color:rgba(82, 122, 253, 0.37);border-radius:50%;padding:10px;border:none;width:20px;height:20px;box-sizing:content-box;-webkit-transition:background-color 0.3s;transition:background-color 0.3s;}@media screen and (min-width: 1200px){.css-1308utl{display:none;}}.css-1308utl svg{width:inherit;height:inherit;-webkit-transition:-webkit-transform 0.3s;transition:transform 0.3s;-webkit-transform:rotateX(0);-moz-transform:rotateX(0);-ms-transform:rotateX(0);transform:rotateX(0);}.css-1308utl.active{background-color:rgba(0, 0, 0, 0.123);}.css-1308utl.active svg{-webkit-transform:rotateX(180deg);-moz-transform:rotateX(180deg);-ms-transform:rotateX(180deg);transform:rotateX(180deg);}</style><button class=" css-1308utl"><svg enable-background="new 0 0 32 32" id="Слой_1" version="1.1" viewBox="0 0 32 32"><path d="M24.285,11.284L16,19.571l-8.285-8.288c-0.395-0.395-1.034-0.395-1.429,0  c-0.394,0.395-0.394,1.035,0,1.43l8.999,9.002l0,0l0,0c0.394,0.395,1.034,0.395,1.428,0l8.999-9.002  c0.394-0.395,0.394-1.036,0-1.431C25.319,10.889,24.679,10.889,24.285,11.284z" fill="#121313" id="Expand_More"></path><g></g><g></g><g></g><g></g><g></g><g></g></svg></button><style data-emotion="css 117dd4v">.css-117dd4v{margin:auto;width:90%;max-width:760px;}.css-117dd4v .article-container{padding:50px 10px;}.css-117dd4v .article-catalog{position:fixed;top:0;left:80%;left:calc(50% + 380px);bottom:0;overflow:hidden;z-index:10;}.css-117dd4v .article-catalog:hover{overflow:auto;overflow:overlay;padding-right:1rem;}@media screen and (max-width: 1200px){.css-117dd4v .article-catalog{display:none;}}</style><main class="css-117dd4v"><aside class="article-catalog"><style data-emotion="css f4f9ae">.css-f4f9ae{padding:20px 0;white-space:nowrap;min-width:120px;box-sizing:content-box;}.css-f4f9ae .title{padding-left:20px;margin-bottom:20px;font-size:1.2em;font-weight:lighter;}</style><nav class="css-f4f9ae"><div class="title">目录</div><style data-emotion="css smzts4">.css-smzts4 ol{list-style:none;padding-left:20px;margin:0;}.css-smzts4 ol ol{padding-left:10px;}.css-smzts4 ol li{line-height:30px;margin:0;}.css-smzts4 ol a{color:#555;-webkit-text-decoration:none;text-decoration:none;line-height:30px;}.css-smzts4 ol a:hover,.css-smzts4 ol a.current{color:#999;}</style><div class="css-smzts4"><ol><li><style data-emotion="css opu5s9">.css-opu5s9.active{color:#999;}</style><a class="css-opu5s9" href="/jnet-basic-v2/css/布局进阶/#包含块">包含块</a><ol><li><a class="css-opu5s9" href="/jnet-basic-v2/css/布局进阶/#确定元素的包含块">确定元素的包含块</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/css/布局进阶/#计算盒模型的百分值">计算盒模型的百分值</a></li></ol></li><li><a class="css-opu5s9" href="/jnet-basic-v2/css/布局进阶/#行内格式化上下文 IFC">行内格式化上下文 IFC</a><ol><li><a class="css-opu5s9" href="/jnet-basic-v2/css/布局进阶/#字体、大小和行高">字体、大小和行高</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/css/布局进阶/#IFC 环境中的框">IFC 环境中的框</a></li></ol></li><li><a class="css-opu5s9" href="/jnet-basic-v2/css/布局进阶/#块格式化上下文 BFC">块格式化上下文 BFC</a><ol><li><a class="css-opu5s9" href="/jnet-basic-v2/css/布局进阶/#创建 BFC">创建 BFC</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/css/布局进阶/#独占一行">独占一行</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/css/布局进阶/#外边距重叠">外边距重叠</a></li><li><a class="css-opu5s9" href="/jnet-basic-v2/css/布局进阶/#内容包含">内容包含</a></li></ol></li><li><a class="css-opu5s9" href="/jnet-basic-v2/css/布局进阶/#杂项">杂项</a></li></ol></div></nav></aside><div class="article-container"><style data-emotion="css dsvq8h">.css-dsvq8h{line-height:1.5;}.css-dsvq8h h1,.css-dsvq8h h2,.css-dsvq8h h3,.css-dsvq8h h4,.css-dsvq8h h5,.css-dsvq8h h6{font-weight:500;line-height:1.2;color:#212529;}.css-dsvq8h h1 a,.css-dsvq8h h2 a,.css-dsvq8h h3 a,.css-dsvq8h h4 a,.css-dsvq8h h5 a,.css-dsvq8h h6 a,.css-dsvq8h h1 a:hover,.css-dsvq8h h2 a:hover,.css-dsvq8h h3 a:hover,.css-dsvq8h h4 a:hover,.css-dsvq8h h5 a:hover,.css-dsvq8h h6 a:hover,.css-dsvq8h h1 a:active,.css-dsvq8h h2 a:active,.css-dsvq8h h3 a:active,.css-dsvq8h h4 a:active,.css-dsvq8h h5 a:active,.css-dsvq8h h6 a:active,.css-dsvq8h h1 a:visited,.css-dsvq8h h2 a:visited,.css-dsvq8h h3 a:visited,.css-dsvq8h h4 a:visited,.css-dsvq8h h5 a:visited,.css-dsvq8h h6 a:visited{color:inherit;}.css-dsvq8h h1{font-size:2.5rem;}.css-dsvq8h h2{font-size:2rem;}.css-dsvq8h h3{font-size:1.75rem;}.css-dsvq8h h4{font-size:1.5rem;}.css-dsvq8h h5{font-size:1.25rem;}.css-dsvq8h h6{font-size:1rem;}.css-dsvq8h p{font-weight:400;font-size:1rem;}.css-dsvq8h em{background-color:#fcf8e3;font-style:normal;color:#000;}.css-dsvq8h blockquote{margin:1.25rem -1rem;padding:0.5rem 1.25rem;border:1px solid #eee;border-left-width:0.25rem;border-radius:0.25rem;border-left-color:#f0ad4e;}.css-dsvq8h blockquote cite{text-align:right;color:silver;font-size:1rem;}.css-dsvq8h ul,.css-dsvq8h ol{padding-left:2rem;}.css-dsvq8h .remark-highlight{margin-left:-1rem;margin-right:-1rem;}.css-dsvq8h pre{border-radius:5px;box-shadow:0 0 10px 3px #cacaca;}.css-dsvq8h code{color:#e83e8c;font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:87.5%;}.css-dsvq8h img{box-shadow:0 0 10px 3px rgba(222, 226, 230, 0.548);border-radius:5px;}.css-dsvq8h a{color:#0d6efd;}.css-dsvq8h a:hover{color:#488df5;}.css-dsvq8h a:visited{color:#0a5dda;}.css-dsvq8h a:active{color:#72a6f5;text-shadow:0 0 3px #7e8af8;}</style><article class="css-dsvq8h"><h1>布局进阶</h1><hr/><style data-emotion="css 1u87juy">.css-1u87juy:hover svg{visibility:visible;}</style><h2 id="包含块" class="css-1u87juy">包含块<style data-emotion="css 17vkerv">.css-17vkerv{float:left;margin-left:-24px;color:inherit;}.css-17vkerv svg{visibility:hidden;}</style><a href="#包含块" class="css-17vkerv"><svg xmlns="http://www.w3.org/2000/svg" width="0.8em" height="0.8em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" color="inherit"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2><blockquote><p><strong>什么是包含块？</strong></p><p>描述：一个元素的框的尺寸和位置的计算有时相对于某个特定的长方形，称为该元素的包含块。</p><cite>---W3C</cite></blockquote><p>元素的布局经常会受到包含块的影响，比如计算块级元素垂直方向上 <code>margin</code> 的百分比，又或者粘性布局的参考区域等，相关布局都会受到包含块的影响。</p><h3 id="确定元素的包含块" class="css-1u87juy">确定元素的包含块<a href="#确定元素的包含块" class="css-17vkerv"><svg xmlns="http://www.w3.org/2000/svg" width="0.8em" height="0.8em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" color="inherit"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3><p>一个元素的包含块和它的 <code>position</code> 属性息息相关：</p><ol><li><code>position</code> 的值是 <code>relative</code> 、<code>static</code> 或者 <code>sticky</code>，该元素的包含块一般由它最近的块元素祖先的内容边界组成。</li><li><code>position</code> 值为 <code>fixed</code> 时，该元素的包含块就是视口区域。</li><li><code>position</code> 值为 <code>absolute</code> 时，包含块由该元素最近的 <code>position</code> 不是 <code>static</code> 的祖先的内容边界组成。</li></ol><p>当然包含块的确定不止规则，比如把一个页面使用打印机打印，那么固定定位元素的包含块就是分页区域，<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/All_About_The_Containing_Block#%E7%A1%AE%E5%AE%9A%E5%8C%85%E5%90%AB%E5%9D%97">详情点击这里</a>。</p><h3 id="计算盒模型的百分值" class="css-1u87juy">计算盒模型的百分值<a href="#计算盒模型的百分值" class="css-17vkerv"><svg xmlns="http://www.w3.org/2000/svg" width="0.8em" height="0.8em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" color="inherit"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3><ul><li><p><code>height</code>、<code>top</code> 和 <code>bottom</code> 的百分值参考的是包含块的高度。但是有一个特殊情况：</p><ul><li>当包含块的 <strong>高度不确定</strong> 时（比如高度由内容撑起时）并且当前元素 <strong>不是绝对定位时</strong>，上述属性的百分比会被当做 <code>auto</code> 处理。</li></ul></li><li><p><code>width</code>、<code>left</code>、<code>right</code>、<code>padding</code> 和 <code>margin</code> 的百分值参考的是包含块的宽度。</p></li><li><p>粘性定位元素的偏移值 <code>top</code>、<code>bottom</code>、<code>left</code> 和 <code>right</code> 的百分比参考的是最近的滚动祖先，而非包含块，其余属性的百分比遵循上述规则。</p></li></ul><blockquote><p><code>border</code> 属性并不支持百分值设置，所以上述没有介绍。</p></blockquote><p>综上，如果你给一个固定定位的元素设置 <code>margin-top : 50%</code> 时，你会发现，它居然是根据视口宽度进行变化的。</p><h2 id="行内格式化上下文 IFC" class="css-1u87juy">行内格式化上下文 IFC<a href="#行内格式化上下文 IFC" class="css-17vkerv"><svg xmlns="http://www.w3.org/2000/svg" width="0.8em" height="0.8em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" color="inherit"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2><p>行内级元素进行横向布局时，会一起创建对应的行内格式化上下文 IFC，IFC 确定了行内级元素横向布局的规则与环境。</p><h3 id="字体、大小和行高" class="css-1u87juy">字体、大小和行高<a href="#字体、大小和行高" class="css-17vkerv"><svg xmlns="http://www.w3.org/2000/svg" width="0.8em" height="0.8em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" color="inherit"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3><ul><li><p><code>font-family</code> 不同，<code>font-size</code> 相同的字体表现出来的大小并不是完全相同。</p></li><li><p><code>line-height</code> 决定的不是字体的高度，只是一个用来布局的行高。</p></li><li><p><code>line-height</code> 为 <code>normal</code> 和 100% 表现的行高不同，<code>normal</code> 往往比 <code>100%</code> 更高一些。</p></li></ul><p>介绍两个字体的高度：</p><ul><li>字体高度：字体根据 <code>font-size</code> 和 <code>font-family</code> 计算渲染出来的高度，可以使用一个 <code>span</code> 元素包裹文本，然后填充背景色看到。这个高度用来显示字体。</li><li>字体行高：由 <code>line-height</code> 决定，这个高度用来布局。</li></ul><p>演示这个沙箱：</p><iframe src="https://codesandbox.io/embed/jinjiebuju-ifc-ziti-de0e9?fontsize=14&amp;hidenavigation=1&amp;theme=dark" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden" title="进阶布局-IFC-字体" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe><h3 id="IFC 环境中的框" class="css-1u87juy">IFC 环境中的框<a href="#IFC 环境中的框" class="css-17vkerv"><svg xmlns="http://www.w3.org/2000/svg" width="0.8em" height="0.8em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" color="inherit"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3><p>看不见，摸不着的两个框：</p><ul><li><p>行内框（又称行内盒）</p><ul><li><p>行内框和盒模型并没有直接关系</p></li><li><p>行内框包裹住了各个行内级元素或文本</p></li><li><p>行内框的宽高</p><ul><li>如果是行内元素（或匿名文本），行内框的高度是字体行高。宽度那么由 <code>font-size</code>、文本长度、<code>margin</code>、<code>border</code>、<code>padding</code> 等相关属性在水平方向的排列后决定。</li><li>如果是行内块元素，行内框的大小是其盒模型的总大小，即 <code>margin</code> + <code>padding</code> + <code>border</code> 加内容区。</li></ul></li></ul></li><li><p>行框（又称行盒）</p><ul><li>行框和盒模型并没有直接关系</li><li>行框包裹住了所在行中所有行内框</li><li>高度：由行内框的排列后的高度决定，并不一定是内部最高的行内框高度</li><li>宽度：默认情况下是包含块的宽度，如果受到浮动元素的影响，会减去浮动元素占据的宽度</li></ul></li></ul><p>演示这个沙箱：</p><iframe src="https://codesandbox.io/embed/jinjiebuju-ifc-bujuquyu-7u6gc?fontsize=14&amp;hidenavigation=1&amp;theme=dark" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden" title="进阶布局-IFC-布局区域" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe><h2 id="块格式化上下文 BFC" class="css-1u87juy">块格式化上下文 BFC<a href="#块格式化上下文 BFC" class="css-17vkerv"><svg xmlns="http://www.w3.org/2000/svg" width="0.8em" height="0.8em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" color="inherit"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2><p>常规流中纵向布局的环境和规则称作块格式化上下文 BFC，IFC 是一个或多个行内级元素参与创建的，而 BFC 一般是由元素直接创建的。</p><p>默认情况下，BFC 内的排版如下：</p><ul><li>独占一行：块级元素产生的各个盒子依次向下排列，每个盒子独占一行，（嵌套不会产生新的 BFC）。</li><li>外边距重叠：块级元素之间的盒子在垂直外边距上会出现相互重叠；</li><li>内容包含：BFC 内包含创建它的元素内部的所有内容；</li></ul><h3 id="创建 BFC" class="css-1u87juy">创建 BFC<a href="#创建 BFC" class="css-17vkerv"><svg xmlns="http://www.w3.org/2000/svg" width="0.8em" height="0.8em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" color="inherit"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3><p>以下方式可以为 <strong>元素的内部</strong> 创建新的 BFC ：</p><ul><li><code>&lt;html&gt;</code> 元素；</li><li><code>overflow</code> 值不为 <code>visible</code> 的块级元素（<code>overflow-x/y</code> 其中一项不为 <code>visible</code> 即可，默认情况下，这种方式不能给 <code>body</code> 元素内部创建新的 BFC）；</li><li>行内块元素：<code>display:inline-block</code>；</li><li>浮动元素：<code>flaot</code> 不是 <code>none</code>:</li><li>绝对定位和固定定位元素；</li><li>其他（一些我们未学到或不常用的方式，又或者兼容性不佳，可以查看 <a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context">这里</a> 了解所有产生 BFC 的方式）</li></ul><blockquote><p>关于给 <code>body</code> 元素设置 <code>overflow</code> 不为 <code>visible</code> 时，不一定产生 BFC 的解释，在 W3C 中是这样介绍的：</p><blockquote><p>用户代理必须把根元素上设置的 <code>overflow</code> 属性应用到视口上，当根元素是 <code>html</code> 或者 <code>xhtml</code> 元素，并且根元素具有 <code>body</code> 元素作为子元素时，如果根元素上的值为 <code>visible</code>，则用户代理必须把第一个这样的子元素的 <code>overflow</code> 属性应用到视口上。值 <code>visible</code> 用在视口上时解释为 <code>auto</code>。必须有 <code>overflow</code> 为 <code>visible</code> 的元素从中传递值。</p><p>--- <a href="https://www.w3.org/TR/CSS21/visufx.html#overflow">W3C overflow</a></p></blockquote><p>也就是说，默认情况下，给 <code>body</code> 元素设置 <code>overflow</code> 属性会应用到视口上，所以 <code>body</code> 元素不会产生新的 BFC 区域。</p><p>如果 <code>html</code> 元素的溢出样式不为 <code>visible</code> 时，那么给 <code>body</code> 元素的 <code>overflow</code> 设置非 <code>visible</code> 值时，就会产生新的 BFC 区域。</p></blockquote><h3 id="独占一行" class="css-1u87juy">独占一行<a href="#独占一行" class="css-17vkerv"><svg xmlns="http://www.w3.org/2000/svg" width="0.8em" height="0.8em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" color="inherit"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3><p><strong>外边距填充：</strong></p><p>因为 BFC 内块级元素独占一行的特性，块级元素的宽度小于当前行时，其余部分会自动被 <code>margin</code> 填充。在这种情况下：</p><ul><li>设置水平方向其中一侧的 <code>margin</code> 为 <code>auto</code>，外边距会在这侧进行填充；</li><li>设置水平方向的 <code>margin</code> 为 <code>auto</code>，这个块级元素就会水平居中。</li></ul><p><strong>边界对齐：</strong></p><p><strong>父子级的块级元素在水平上是按照父级内容边界和子级外边距的边缘进行对齐</strong>。</p><p>就比如默认情况下的列表项，因为 <code>ul</code> 和 <code>ol</code> 元素拥有左侧的内边距，导致列表项元素会像右侧进行偏移。当 <code>margin</code> 设置为负值时，元素的外边距边界会收缩到元素内部，与父级元素对齐的位置也会产生改变。比如 <code>margin-left: -100px</code>。</p><p>可以使用负值外边距，插入一个比父级宽度更宽但是水平居中的元素，比如：</p><div class="remark-highlight"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>outside<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>这里是正常文本<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inside<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>这里比父级元素更宽，并且在相对父级水平居中<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>给上述代码插入以下样式：</p><div class="remark-highlight"><pre class="language-css"><code class="language-css"><span class="token selector"><span class="token class">.outside</span></span> <span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">600</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.inside</span></span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">700</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span> <span class="token number">-50</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="外边距重叠" class="css-1u87juy">外边距重叠<a href="#外边距重叠" class="css-17vkerv"><svg xmlns="http://www.w3.org/2000/svg" width="0.8em" height="0.8em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" color="inherit"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3><p>在常规流的 <strong>同一个 BFC 中</strong>，如果两个块级元素之间，没有边框 <code>border</code>、内边距 <code>padding</code>、行框或非空的内容区等阻挡它们的外边距，那么它们的外边距部分会发生重叠。外边距重叠又叫外边距合并，外边距折叠等等。</p><p>BFC 环境内的外边距重叠有以下三种情况：</p><ul><li>父子级</li><li>兄弟级</li><li>兄弟级中有空的块级元素</li></ul><p>上面发生的重叠现象还会相互叠加，比如父子级产生重叠后，又与兄弟级产生重叠。</p><p>围绕外边距重叠的定义，有以下方式解决重叠的问题：</p><ul><li>让外边距不直接接触：在两个外边距之间添加 <code>border</code>、<code>padding</code>、行框或非空内容区等；</li><li>累加重叠部分：如果重叠了 <code>20px</code>，那么在其中一侧累加 <code>20px</code> 的外边距即可；</li><li>建立新的 BFC 环境：不同 BFC 环境之间的元素不会产生外边距重叠。</li></ul><blockquote><p><strong>是否一定需要解决外边距合并？</strong></p><p>不一定，如果并没有影响到我们的布局，我们并不需要去处理外边距重叠，因为它并不是一个 bug，它只是 BFC 环境中块级元素的布局方式。</p></blockquote><h3 id="内容包含" class="css-1u87juy">内容包含<a href="#内容包含" class="css-17vkerv"><svg xmlns="http://www.w3.org/2000/svg" width="0.8em" height="0.8em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" color="inherit"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3><p>BFC 内包含创建它的元素内部的所有内容。它会产生以下影响：</p><ul><li>外边距合并无法重叠到 BFC 外，会撑起当前 BFC 区域。</li><li>浮动元素会撑起 BFC 区域。</li></ul><p><strong>关于浮动元素会撑起 BFC 区域：</strong></p><p>在<a href="../%E5%9F%BA%E7%A1%80%E5%B8%83%E5%B1%80">基础布局</a>的浮动布局小结中，使用 <code>float</code> 属性实现了一个横向列表，如：</p><div class="remark-highlight"><pre class="language-css"><code class="language-css"><span class="token selector">ul</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">li</span> <span class="token punctuation">{</span>
  <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token unit">px</span> solid <span class="token color">black</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>受到浮动元素的影响，在列表后面的文本会环绕这个列表布局，当时解决的方案是清除浮动。现在我们可以给 <code>ul</code> 元素建立新的 BFC 区域，这样 <code>li</code> 元素就会被 <code>ul</code> 建立的 BFC 区域包含，从而消除浮动给其他 BFC 区域文本造成的影响，比如给 <code>ul</code> 元素添加：</p><div class="remark-highlight"><pre class="language-css"><code class="language-css"><span class="token selector">ul</span> <span class="token punctuation">{</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>overflow: auto</code> 会产生新的 BFC 区域，因为我们没有给 <code>ul</code> 元素设置高度，所以也不会产生滚动条的副作用，此时 <code>ul</code> 元素将再次包含 <code>li</code> 元素，并挤压后续的文本到下一行显示。</p><h2 id="杂项" class="css-1u87juy">杂项<a href="#杂项" class="css-17vkerv"><svg xmlns="http://www.w3.org/2000/svg" width="0.8em" height="0.8em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" color="inherit"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2><ul><li><p>如果产生 BFC 的元素本身还是一个块级元素，并且周围存在浮动元素，那么它会紧靠浮动元素独占一行，<strong>不会因为浮动元素挤压换行。</strong></p></li><li><p>相对定位和粘性定位并不会产生新的 BFC 环境，所以它们都会受到浮动元素的影响，并且浮动对相对定位与粘性定位的影响在定位之前，而非定位之后；</p></li></ul></article></div></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/css/布局进阶/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-da8157b780a7e1fd9e9e.js"],"app":["/app-38218a2ef72326a75367.js"],"component---src-pages-404-js":["/component---src-pages-404-js-f91e86cfe65092e3adc1.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-57b3b630e72243cc3df9.js"],"component---src-templates-docs-tsx":["/component---src-templates-docs-tsx-3f6722c11400634ddec5.js"]};/*]]>*/</script><script src="/jnet-basic-v2/polyfill-da8157b780a7e1fd9e9e.js" nomodule=""></script><script src="/jnet-basic-v2/component---src-templates-docs-tsx-3f6722c11400634ddec5.js" async=""></script><script src="/jnet-basic-v2/1512ff2dbf77859a0dcbee24710e2018e282937f-369ee37846485c1e14f7.js" async=""></script><script src="/jnet-basic-v2/app-38218a2ef72326a75367.js" async=""></script><script src="/jnet-basic-v2/framework-e8e53ba50a7a1b0850f7.js" async=""></script><script src="/jnet-basic-v2/webpack-runtime-a52939d631f5cc604aea.js" async=""></script></body></html>