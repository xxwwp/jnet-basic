<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="HTML，CSS，JavaScript 基础知识 " />
    
<link rel="stylesheet" href="/jnet-basic/css/layout.css">

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.1/styles/agate.css"
      integrity="sha256-kp6wpFoGWDWLARjInqKMjQOa80CoSWr0RGbhXohAh2c="
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css"
      integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"
    ></script>
    <title>JNet Basic</title>
  <meta name="generator" content="Hexo 5.2.0"></head>

  <body>
    <div class="sidebar">
  <aside class="sidebar-toc-page"><!--  -->


<div class="toc-page">
  <div class="toc-page-hd">
    <a href="/jnet-basic/"> JNet Basic </a>
  </div>
  <ul>
    
<li>
  <a href="/jnet-basic/%E8%AF%BE%E7%A8%8B%E4%BB%8B%E7%BB%8D/" class="">课程介绍</a>
</li>

<li>
  <span class="label">html_</span>
</li>
<ul>
  
<li>
  <a href="/jnet-basic/html_/%E6%95%99%E7%BA%B2/" class="">教纲</a>
</li>

<li>
  <a href="/jnet-basic/html_/%E6%A6%82%E8%BF%B0/" class="">概述</a>
</li>

<li>
  <a href="/jnet-basic/html_/%E5%9F%BA%E7%A1%80%E7%90%86%E8%AE%BA/" class="">基础理论</a>
</li>

<li>
  <a href="/jnet-basic/html_/%E5%A4%B4%E9%83%A8%E5%AD%A6%E4%B9%A0/" class="">头部学习</a>
</li>

<li>
  <span class="label">元素学习</span>
</li>
<ul>
  
<li>
  <a href="/jnet-basic/html_/%E5%85%83%E7%B4%A0%E5%AD%A6%E4%B9%A0/%E6%96%87%E7%AB%A0%E7%9B%B8%E5%85%B3%E7%9A%84%E5%85%83%E7%B4%A0/" class="">文章相关的元素</a>
</li>

<li>
  <a href="/jnet-basic/html_/%E5%85%83%E7%B4%A0%E5%AD%A6%E4%B9%A0/%E8%B6%85%E9%93%BE%E6%8E%A5%E4%B8%8E%E5%9B%BE%E7%89%87/" class="">超链接与图片</a>
</li>

<li>
  <a href="/jnet-basic/html_/%E5%85%83%E7%B4%A0%E5%AD%A6%E4%B9%A0/%E6%97%A0%E8%AF%AD%E4%B9%89%E5%85%83%E7%B4%A0/" class="">无语义元素</a>
</li>

<li>
  <a href="/jnet-basic/html_/%E5%85%83%E7%B4%A0%E5%AD%A6%E4%B9%A0/%E8%A1%A8%E6%A0%BC/" class="">表格</a>
</li>

<li>
  <a href="/jnet-basic/html_/%E5%85%83%E7%B4%A0%E5%AD%A6%E4%B9%A0/%E8%A1%A8%E5%8D%95%E5%85%83%E7%B4%A0/" class="">表单元素</a>
</li>

</ul>

<li>
  <a href="/jnet-basic/html_/%E5%B1%9E%E6%80%A7/" class="">属性</a>
</li>

<li>
  <a href="/jnet-basic/html_/%E8%A1%A5%E5%85%85%E4%B8%8E%E7%BB%93%E6%9D%9F/" class="">补充与结束</a>
</li>

</ul>

<li>
  <span class="label">css_</span>
</li>
<ul>
  
<li>
  <a href="/jnet-basic/css_/%E6%95%99%E7%BA%B2/" class="">教纲</a>
</li>

<li>
  <a href="/jnet-basic/css_/%E6%A6%82%E8%BF%B0/" class="">概述</a>
</li>

<li>
  <a href="/jnet-basic/css_/%E9%80%89%E6%8B%A9%E5%99%A8/" class="">选择器</a>
</li>

<li>
  <a href="/jnet-basic/css_/%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5-%E5%B1%82%E5%8F%A0%EF%BC%8C%E7%BB%A7%E6%89%BF%EF%BC%8C%E4%BC%98%E5%85%88%E7%BA%A7/" class="">核心概念-层叠，继承，优先级</a>
</li>

<li>
  <a href="/jnet-basic/css_/%E7%9B%92%E6%A8%A1%E5%9E%8B%E4%B8%8E%E6%96%87%E6%A1%A3%E6%B5%81/" class="">盒模型与文档流</a>
</li>

<li>
  <a href="/jnet-basic/css_/%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86/" class="">文本处理</a>
</li>

<li>
  <a href="/jnet-basic/css_/%E8%A1%A8%E6%A0%BC%E5%A4%84%E7%90%86/" class="">表格处理</a>
</li>

<li>
  <a href="/jnet-basic/css_/%E8%83%8C%E6%99%AF%E5%A4%84%E7%90%86/" class="">背景处理</a>
</li>

<li>
  <a href="/jnet-basic/css_/%E6%9D%82%E9%A1%B9/" class="">杂项</a>
</li>

<li>
  <a href="/jnet-basic/css_/%E5%9F%BA%E7%A1%80%E5%B8%83%E5%B1%80/" class="">基础布局</a>
</li>

<li>
  <a href="/jnet-basic/css_/%E5%B8%83%E5%B1%80%E8%BF%9B%E9%98%B6/" class="">布局进阶</a>
</li>

<li>
  <a href="/jnet-basic/css_/%E5%B8%B8%E8%A7%81%E5%B8%83%E5%B1%80%E7%BB%83%E4%B9%A0/" class="">常见布局练习</a>
</li>

<li>
  <a href="/jnet-basic/css_/%E8%A1%A5%E5%85%85%E4%B8%8E%E7%BB%93%E6%9D%9F/" class="">补充与结束</a>
</li>

</ul>

<li>
  <span class="label">js_</span>
</li>
<ul>
  
<li>
  <a href="/jnet-basic/js_/%E7%9B%AE%E5%BD%95/" class="">目录</a>
</li>

<li>
  <a href="/jnet-basic/js_/%E7%A8%8B%E5%BA%8F%E5%BC%95%E5%AF%BC%E8%AF%BE/" class="">程序引导课</a>
</li>

<li>
  <a href="/jnet-basic/js_/%E5%9F%BA%E7%A1%80/" class="">基础</a>
</li>

<li>
  <a href="/jnet-basic/js_/%E6%95%B0%E6%8D%AE%E3%80%81%E8%BF%90%E7%AE%97%E7%AC%A6%E5%92%8C%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="">数据、运算符和表达式</a>
</li>

<li>
  <a href="/jnet-basic/js_/%E5%87%BD%E6%95%B0%E5%92%8C%E4%BD%9C%E7%94%A8%E5%9F%9F/" class="">函数和作用域</a>
</li>

<li>
  <a href="/jnet-basic/js_/%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/" class="">引用类型</a>
</li>

<li>
  <a href="/jnet-basic/js_/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/" class="">流程控制</a>
</li>

<li>
  <a href="/jnet-basic/js_/%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD%E4%B8%8E%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/" class="">类型判断与类型转换</a>
</li>

<li>
  <a href="/jnet-basic/js_/%E5%87%BD%E6%95%B0%E6%B7%B1%E5%85%A5/" class="">函数深入</a>
</li>

<li>
  <a href="/jnet-basic/js_/%E5%B8%B8%E7%94%A8_API/" class="">常用_API</a>
</li>

<li>
  <a href="/jnet-basic/js_/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/" class="">异步编程</a>
</li>

<li>
  <a href="/jnet-basic/js_/%E6%8F%90%E5%8D%87/" class="">提升</a>
</li>

<li>
  <a href="/jnet-basic/js_/%E9%97%AD%E5%8C%85/" class="">闭包</a>
</li>

<li>
  <a href="/jnet-basic/js_/this_%E5%85%B3%E9%94%AE%E5%AD%97/" class="">this_关键字</a>
</li>

<li>
  <a href="/jnet-basic/js_/%E5%AF%B9%E8%B1%A1%E5%8E%9F%E5%9E%8B/" class="">对象原型</a>
</li>

<li>
  <a href="/jnet-basic/js_/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" class="">面向对象</a>
</li>

<li>
  <a href="/jnet-basic/js_/DOM/" class="">DOM</a>
</li>

<li>
  <a href="/jnet-basic/js_/%E4%BA%8B%E4%BB%B6/" class="current">事件</a>
</li>

<li>
  <a href="/jnet-basic/js_/BOM/" class="">BOM</a>
</li>

<li>
  <a href="/jnet-basic/js_/%E6%B8%B2%E6%9F%93%E4%B8%8E%E5%8A%A0%E8%BD%BD/" class="">渲染与加载</a>
</li>

<li>
  <a href="/jnet-basic/js_/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/" class="">错误处理</a>
</li>

<li>
  <a href="/jnet-basic/js_/%E4%B8%A5%E6%A0%BC%E6%A8%A1%E5%BC%8F/" class="">严格模式</a>
</li>

<li>
  <a href="/jnet-basic/js_/%E6%AD%A3%E5%88%99%E5%AD%97%E7%AC%A6%E4%B8%B2/" class="">正则字符串</a>
</li>

<li>
  <a href="/jnet-basic/js_/%E7%BD%91%E7%BB%9C%E7%AE%80%E8%BF%B0/" class="">网络简述</a>
</li>

<li>
  <a href="/jnet-basic/js_/%E6%9D%82%E9%A1%B9/" class="">杂项</a>
</li>

</ul>

<li>
  <a href="/jnet-basic/%E6%80%BB%E7%BB%83%E4%B9%A0/" class="">总练习</a>
</li>

<li>
  <a href="/jnet-basic/%E8%AF%BE%E7%A8%8B%E6%80%BB%E7%BB%93/" class="">课程总结</a>
</li>

<li>
  <a href="/jnet-basic/%E7%B4%A0%E6%9D%90/" class="">素材</a>
</li>

  </ul>
</div>
</aside>
  <aside class="sidebar-toc-article"><div class="toc-article"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-text">概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%E4%B8%8E%E8%A7%A3%E7%BB%91"><span class="toc-text">事件绑定与解绑</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E4%B8%AA%E7%BB%91%E5%AE%9A"><span class="toc-text">单个绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E4%B8%AA%E7%BB%91%E5%AE%9A"><span class="toc-text">多个绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%83%E7%B4%A0%E7%BB%91%E5%AE%9A"><span class="toc-text">元素绑定</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1-amp-%E4%BA%8B%E4%BB%B6%E6%BA%90"><span class="toc-text">事件对象 &amp; 事件源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E6%B5%81%E4%B8%8E%E5%86%92%E6%B3%A1%E6%8D%95%E8%8E%B7"><span class="toc-text">事件流与冒泡捕获</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E4%BA%8B%E4%BB%B6"><span class="toc-text">默认事件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%84%E7%B1%BB%E4%BA%8B%E4%BB%B6"><span class="toc-text">各类事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%BC%A0%E6%A0%87%E4%BA%8B%E4%BB%B6"><span class="toc-text">鼠标事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%94%AE%E7%9B%98%E4%BA%8B%E4%BB%B6"><span class="toc-text">键盘事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E5%8D%95%E4%BA%8B%E4%BB%B6"><span class="toc-text">表单事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E4%BA%8B%E4%BB%B6"><span class="toc-text">其他事件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A5%E5%85%85"><span class="toc-text">补充</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E5%8A%A8%E8%A7%A6%E5%8F%91%E4%BA%8B%E4%BB%B6"><span class="toc-text">主动触发事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#javascript-%E5%8D%8F%E8%AE%AE"><span class="toc-text">javascript 协议</span></a></li></ol></li></ol></div>
</aside>
</div>
<script>
  $(document).ready(function () {
    var elTocPage = $('.sidebar .sidebar-toc-page').get(0);
    $(elTocPage).on('click', function (elToc) {
      $(this).addClass('show')
    })
    $(document).on('click', function (el) {
      elTocPage.contains(el.target) || $(elTocPage).removeClass('show');
    })
  })
</script>
    <main><article>
  <h1>事件</h1>
  <hr />
  <div class="article-bd"><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>事件可以在页面中的操作与逻辑代码绑定关联关系，在用户和代码之间建立交互。</p>
<p>尝试给按钮的点击事件绑定一个函数 <code>foo</code>：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;foo()&quot;</span>&gt;</span>点击事件<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">    alert(<span class="hljs-string">&quot;点击就弹框&quot;</span>);</span><br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>上述代码会给这个按钮注册一个点击事件，当用户点击按钮的时候，会执行全局上的 <code>foo</code> 函数。</p>
<p>其中，<code>onclick</code> 表示一个点击 <strong>事件</strong>，<code>foo</code> 被叫做这个点击事件的 <strong>事件处理器</strong>，事件与事件处理器之间存在绑定关系。</p>
<h2 id="事件绑定与解绑"><a href="#事件绑定与解绑" class="headerlink" title="事件绑定与解绑"></a>事件绑定与解绑</h2><p>为一个事件绑定事件处理器有三种方式：</p>
<ul>
<li>单个绑定</li>
<li>多个绑定</li>
<li>元素绑定</li>
</ul>
<h3 id="单个绑定"><a href="#单个绑定" class="headerlink" title="单个绑定"></a>单个绑定</h3><p>元素的所有事件都有对应的元素属性，通过给对应的事件属性赋值一个函数，即可绑定对应的事件处理器，比如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> bt0 = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">&quot;button&quot;</span>)[<span class="hljs-number">0</span>];<br>bt0.onclick = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;事件执行了&quot;</span>);<br>&#125;;<br><span class="hljs-comment">// 解绑</span><br><span class="hljs-comment">// bt0.onclick = null;</span><br></code></pre></td></tr></table></figure>

<p>如果需要解绑事件，直接让对应事件的值为 <code>null</code> 即可。</p>
<p><strong>当一个事件没有绑定时，它的默认值是 <code>null</code>，元素不支持事件为 <code>undefined</code>。</strong> 你可以使用此规则判断浏览器是否支持某个事件，比如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> foo = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;foo&quot;</span>);<br><span class="hljs-keyword">if</span> (foo.onclick !== <span class="hljs-literal">undefined</span>) &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;浏览器支持 onclick 事件&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="多个绑定"><a href="#多个绑定" class="headerlink" title="多个绑定"></a>多个绑定</h3><p>也可以为同一个元素的同一个事件绑定多个事件处理器，使用以下方法</p>
<ul>
<li><code>EventTarget.addEventListener</code>：为元素的某个事件绑定一个事件处理器</li>
<li><code>EventTarget.removeEventListener</code>：解绑一个事件</li>
<li><code>attachEvent</code>：绑定事件，IE9 以下使用</li>
<li><code>detachEvent</code>：解绑事件，IE9 以下使用</li>
</ul>
<p>示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> bt0 = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">&quot;button&quot;</span>)[<span class="hljs-number">0</span>];<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;事件触发了&quot;</span>);<br>&#125;<br><br>bt0.addEventListener(<span class="hljs-string">&quot;click&quot;</span>, foo);<br><span class="hljs-comment">// IE 低版本按照以下方式绑定</span><br><span class="hljs-comment">// bt.attachEvent(&quot;onclick&quot;, foo);</span><br><br><span class="hljs-comment">// 解绑</span><br><span class="hljs-comment">// bt0.removeEventListener(foo);</span><br><span class="hljs-comment">// bt0.detachEvent(foo);</span><br></code></pre></td></tr></table></figure>

<p>如果事件处理器是一个匿名函数表达式，并且这个函数表达式没有被保存，那么将无法解绑事件，因为无法设置解绑的函数。比如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> bt0 = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">&quot;button&quot;</span>)[<span class="hljs-number">0</span>];<br><br><span class="hljs-comment">// 函数声明</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;foo，这个事件可以解绑&quot;</span>);<br>&#125;<br>bt0.addEventListener(<span class="hljs-string">&quot;click&quot;</span>, foo);<br><span class="hljs-comment">// 解绑</span><br>bt0.removeEventListener(foo);<br><br><span class="hljs-comment">// 保存函数表达式</span><br><span class="hljs-keyword">var</span> bar = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;bar，这个事件可以解绑&quot;</span>);<br>&#125;;<br>bt0.addEventListener(<span class="hljs-string">&quot;click&quot;</span>, bar);<br><span class="hljs-comment">// 解绑</span><br>bt0.removeEventListener(bar);<br><br><span class="hljs-comment">// 绑定一个具名函数表达式</span><br>bt0.addEventListener(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">baz</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;baz，这个事件可以在处理器中解绑，单击一次后解绑&quot;</span>);<br>  <span class="hljs-comment">// 解绑</span><br>  bt0.removeEventListener(baz);<br>&#125;);<br><br><span class="hljs-comment">// 绑定一个匿名函数表达式，无法解绑</span><br>bt0.addEventListener(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;匿名，这个事件无法解绑&quot;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><mark>备注：当多个一个事件绑定多个事件处理器时，触发事件的时候它们会按照绑定顺序执行。</mark></p>
<p>因为低版本 IE 没有 <code>addEventListener</code>，你可以是自行编写兼容代码，如：</p>
<h3 id="元素绑定"><a href="#元素绑定" class="headerlink" title="元素绑定"></a>元素绑定</h3><p>可以配合 HTML 代码绑定事件：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;foo()&quot;</span>&gt;</span>click<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;事件绑定&quot;</span>);</span><br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>上述绑定事件的方式不被推荐，因为这样 JavaScript 的代码干扰了 HTML 结构。</p>
<h2 id="事件对象-amp-事件源"><a href="#事件对象-amp-事件源" class="headerlink" title="事件对象 &amp; 事件源"></a>事件对象 &amp; 事件源</h2><p><strong>当事件触发的时候，系统会传给事件处理器一个参数，这个参数称作事件对象，里面包含了事件执行时的详细信息。</strong> 比如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> bt0 = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">&quot;button&quot;</span>)[<span class="hljs-number">0</span>];<br><br>bt0.addEventListener(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(e);<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>事件对象中有执行事件时的各种信息，不同的事件得到的事件对象有些许不同，稍后介绍各类事件时会逐一介绍对应的事件对象。</p>
<p>事件执行时，并不是所有情况下都会传入事件对象，比如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;test()&quot;</span>&gt;</span>bt<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params">e</span>) </span>&#123;</span><br><span class="javascript">    <span class="hljs-built_in">console</span>.log(e); <span class="hljs-comment">// undefined</span></span><br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>上面的情况可以通过主动传入事件对象来解决，比如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;test(event)&quot;</span>&gt;</span>bt<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params">e</span>) </span>&#123;</span><br><span class="javascript">    <span class="hljs-built_in">console</span>.log(e);</span><br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>IE 低版本兼容性极差，可以使用 <code>window.event</code> 来获取，这是不标准的写法，因为 <code>window.event</code> 是动态的，并不安全：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> bt0 = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">&quot;button&quot;</span>)[<span class="hljs-number">0</span>];<br><br>bt0.onclick = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> event = e || <span class="hljs-built_in">window</span>.event;<br>  <span class="hljs-built_in">console</span>.log(event);<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>事件对象上的 <code>target</code> 属性指向触发该事件的元素，这个元素被称作 <strong>事件源</strong>。低版本的 IE 中，事件源需要由事件对象上的 <code>srcElement</code> 属性获取。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;test(event)&quot;</span>&gt;</span>bt<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params">e</span>) </span>&#123;</span><br><span class="javascript">    <span class="hljs-keyword">var</span> event = e || <span class="hljs-built_in">window</span>.event;</span><br><span class="javascript">    <span class="hljs-keyword">var</span> targetEl = event.target || event.srcElement;</span><br><span class="javascript">    targetEl.style.background = <span class="hljs-string">&quot;red&quot;</span>;</span><br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>标准的事件源是通过 <code>target</code> 获取，<code>srcElement</code> 是兼容 IE 的写法。</p>
<h2 id="事件流与冒泡捕获"><a href="#事件流与冒泡捕获" class="headerlink" title="事件流与冒泡捕获"></a>事件流与冒泡捕获</h2><p>事件触发时，事件会被分发到触发事件元素的父级及祖先上，观察下列代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">  <span class="hljs-keyword">var</span> div = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">&quot;div&quot;</span>)[<span class="hljs-number">0</span>];</span><br><br><span class="javascript">  div.addEventListener(<span class="hljs-string">&quot;input&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>&#123;</span><br><span class="javascript">    <span class="hljs-built_in">console</span>.log(e.target.value);</span><br>  &#125;);<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>我们在 <code>div</code> 元素上绑定了一个表单输入事件，<code>input</code> 元素的输入事件，传递给了父级，父级 <code>div</code> 元素监听到了子级传递过来的事件，我们把这种事件传播的行为，称作 <strong>事件流</strong>。</p>
<p>事件流是双向的，从父到子传递的过程被称作 <strong>事件捕获</strong>、从子到父传递的过程被称作 <strong>事件冒泡</strong>。每次事件触发时，会 <strong>先进行事件捕获，再进行事件冒泡</strong>。</p>
<p>在 <a target="_blank" rel="noopener" href="https://www.w3.org/TR/DOM-Level-3-Events/#event-flow">w3c</a> 中，有对事件流传递过程的可视化模型。</p>
<p>通过指定 <code>addEventListener</code> 的第三个参数，可以指定事件在什么阶段触发。第三个参数是一个布尔值，<code>true</code> 为捕获阶段触发，<code>false</code> 为冒泡阶段触发。（IE9 以下事件流只有冒泡阶段）</p>
<p>示例（查看控制台）：</p>
<iframe src="https://codesandbox.io/embed/example-of-event-flow-kevot?fontsize=14&hidenavigation=1&theme=dark"
     style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;"
     title="example-of-event-flow"
     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
   ></iframe>

<p>事件流的传播可以阻止，在事件对象上提供了停止事件传播的方法：</p>
<ul>
<li><code>Event.stopPropagation</code>：标准，停止事件传播。</li>
<li><code>cancelBubble</code>：，停止事件冒泡，IE9 以下的事件流没有捕获阶段，只有冒泡阶段，所以 <code>attachEvent</code> 绑定事件就没有第三个参数。</li>
</ul>
<p>通过以下代码，可以在上面的例子中阻止事件传播：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;foo2&quot;</span>).addEventListener(<br>  <span class="hljs-string">&quot;click&quot;</span>,<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>&#123;<br>    e.stopPropagation();<br>  &#125;,<br>  <span class="hljs-literal">true</span><br>);<br></code></pre></td></tr></table></figure>

<p>如果你想让你的页面能顺畅运行在 IE9 以下，你可以在元素的原型上添加一个自定义绑定事件的方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bindEvent</span>(<span class="hljs-params">el, name, handle, useCatch</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (el.addEventListener) &#123;<br>    el.addEventListener(name, handle, useCatch);<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    el.attachEvent(<span class="hljs-string">&quot;on&quot;</span> + name, handle);<br>  &#125;<br>&#125;<br><span class="hljs-keyword">var</span> foo = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;foo&quot;</span>);<br>bindEvent(foo, <span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;事件绑定&quot;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h2 id="默认事件"><a href="#默认事件" class="headerlink" title="默认事件"></a>默认事件</h2><p>很多事件有默认行为，比如超链接元素的 <code>click</code> 事件或者表单提交的 <code>submit</code> 事件，它们都有可能会跳转页面。</p>
<p>观察以下代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;https://www.baidu.com/s&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://www.iqiyi.com/&quot;</span>&gt;</span>iqiyi<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;wd&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;search&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>上述代码中，无论点击 <code>iqiyi</code> 按钮还是点击 <code>search</code> 按钮，都会发生页面跳转，这是超链接点击事件和表单提交事件的 <mark>默认行为</mark>。</p>
<p>默认行为是可以阻止的，使用事件对象的 <code>preventDefault</code> 方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">&quot;form&quot;</span>)[<span class="hljs-number">0</span>].addEventListener(<span class="hljs-string">&quot;submit&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>&#123;<br>  e.preventDefault();<br>&#125;);<br><br><span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">&quot;a&quot;</span>)[<span class="hljs-number">0</span>].addEventListener(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>&#123;<br>  e.preventDefault();<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>低版本 IE 中不支持该方法，在低版本 IE 中，可以使用 <code>event.returnValue = false</code> 值来阻止默认事件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">&quot;form&quot;</span>)[<span class="hljs-number">0</span>].addEventListener(<span class="hljs-string">&quot;submit&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>&#123;<br>  e = e || <span class="hljs-built_in">window</span>.event;<br>  e.returnValue = <span class="hljs-literal">false</span>;<br>  e.preventDefault &amp;&amp; e.preventDefault();<br>&#125;);<br></code></pre></td></tr></table></figure>

<h2 id="各类事件"><a href="#各类事件" class="headerlink" title="各类事件"></a>各类事件</h2><p>JS 中事件繁多：</p>
<ul>
<li>鼠标事件（鼠标点击，滑动）</li>
<li>键盘事件（键盘输入）</li>
<li>表单事件（表单改变，焦点获取或丢失等）</li>
<li>其他</li>
</ul>
<h3 id="鼠标事件"><a href="#鼠标事件" class="headerlink" title="鼠标事件"></a>鼠标事件</h3><table>
<thead>
<tr>
<th>事件名</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>onclick</code></td>
<td>单击</td>
</tr>
<tr>
<td><code>ondbclick</code></td>
<td>双击（如果绑定了单击事件，那么单击事件也会触发）</td>
</tr>
<tr>
<td><code>onmousedown</code></td>
<td>鼠标按下</td>
</tr>
<tr>
<td><code>onmouseup</code></td>
<td>鼠标松开</td>
</tr>
<tr>
<td><code>onmousemove</code></td>
<td>鼠标移动</td>
</tr>
<tr>
<td><code>onmouseenter</code></td>
<td>鼠标移入到该元素内部 不会冒泡</td>
</tr>
<tr>
<td><code>onmouseleave</code></td>
<td>鼠标移出到该元素内部 不会冒泡</td>
</tr>
<tr>
<td><code>onmouseover</code></td>
<td>鼠标移入到该元素上（从内部子级移入也会触发）</td>
</tr>
<tr>
<td><code>onmouseout</code></td>
<td>鼠标移出到该元素上（移出到内部子级也会触发）</td>
</tr>
</tbody></table>
<p><strong>需要注意的是， <code>onclick</code> 和 <code>ondbclick</code> 都只有鼠标左键才能触发。</strong></p>
<p>鼠标事件的事件对象都是由 <code>MouseEvent</code> 创建的，以下是 <code>MouseEvent</code> 事件对象提供的常用的属性：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>MouseEvent.offsetX/Y</code></td>
<td>相对目标节点的内容边界的偏移量（在 border 上可能为负值）</td>
</tr>
<tr>
<td><code>MouseEvent.clientX/Y</code></td>
<td>相对视区的偏移量</td>
</tr>
<tr>
<td><code>MouseEvent.screenX/Y</code></td>
<td>相对屏幕的偏移量</td>
</tr>
<tr>
<td><code>MouseEvent.shiftKey</code></td>
<td>是否按下辅助键 <code>shift</code> 键</td>
</tr>
<tr>
<td><code>MouseEvent.ctrlKey</code></td>
<td>是否按下辅助键 <code>ctrl</code> 键</td>
</tr>
<tr>
<td><code>MouseEvent.altKey</code></td>
<td>是否按下辅助键 <code>alt</code> 键</td>
</tr>
</tbody></table>
<p>鼠标滚轮事件</p>
<table>
<thead>
<tr>
<th>事件</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>onwheel</code></td>
<td>使用滚轮时触发，IE 不支持</td>
</tr>
<tr>
<td><code>onmousewheel</code></td>
<td>类似 onwheel ，非标准事件，不建议使用，Firefox 不支持</td>
</tr>
</tbody></table>
<p>鼠标滚轮事件由 <code>WheelEvent</code> 创建，它的原型是 <code>MouseEvent</code>，所以也可以使用 <code>MouseEvent</code> 的属性，<code>WheelEvent</code> 常用属性如下：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>对应事件</th>
<th>描述</th>
<th>兼容</th>
</tr>
</thead>
<tbody><tr>
<td><code>wheelDelta</code></td>
<td>onmousewheel</td>
<td>滚动的抽象值</td>
<td>Firefox 无效</td>
</tr>
<tr>
<td><code>wheelDeltaX</code></td>
<td>onmousewheel</td>
<td>X 轴滚动的抽象值</td>
<td>Firefox 无效 IE 无效</td>
</tr>
<tr>
<td><code>wheelDeltaY</code></td>
<td>onmousewheel</td>
<td>Y 轴滚动的抽象值</td>
<td>Firefox 无效 IE 无效</td>
</tr>
<tr>
<td><code>deltaX</code></td>
<td>onwheel</td>
<td>X 轴滚动量</td>
<td>IE 无效</td>
</tr>
<tr>
<td><code>deltaY</code></td>
<td>onwheel</td>
<td>Y 轴滚动量</td>
<td>IE 无效</td>
</tr>
<tr>
<td><code>deltaZ</code></td>
<td>onwheel</td>
<td>Z 轴滚动量</td>
<td>IE 无效</td>
</tr>
<tr>
<td><code>deltaMode</code></td>
<td>onwheel</td>
<td>滚动量的单位，0 为像素，1 为行，2 为页</td>
<td>IE 无效</td>
</tr>
</tbody></table>
<h3 id="键盘事件"><a href="#键盘事件" class="headerlink" title="键盘事件"></a>键盘事件</h3><table>
<thead>
<tr>
<th>事件名</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>onkeydown</code></td>
<td>键盘按键按下</td>
</tr>
<tr>
<td><code>onkeypress</code></td>
<td>键盘按键按下并输入字符后触发，此事件在新标准中已废弃</td>
</tr>
<tr>
<td><code>onkeyup</code></td>
<td>键盘按键松开</td>
</tr>
</tbody></table>
<p>元素获取焦点后按下键盘按键会触发键盘事件，默认情况下，当点击页面中时，<code>body</code> 元素是获取到焦点的。</p>
<p>观察以下代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bindKeyEvent</span>(<span class="hljs-params">el, eventName, mes</span>) </span>&#123;<br>  el.addEventListener(eventName, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(mes);<br>  &#125;);<br>&#125;<br><br>bindKeyEvent(<span class="hljs-built_in">document</span>, <span class="hljs-string">&quot;keydown&quot;</span>, <span class="hljs-string">&quot;down&quot;</span>);<br>bindKeyEvent(<span class="hljs-built_in">document</span>, <span class="hljs-string">&quot;keypress&quot;</span>, <span class="hljs-string">&quot;press&quot;</span>);<br>bindKeyEvent(<span class="hljs-built_in">document</span>, <span class="hljs-string">&quot;keyup&quot;</span>, <span class="hljs-string">&quot;up&quot;</span>);<br></code></pre></td></tr></table></figure>

<p>点击键盘按键，上述三个事件会依次执行，但若长按键盘按键， <code>keydown</code> 和 <code>keypress</code> 会交替执行，某些浏览器上，长按键盘按键 <code>keyup</code> 也会同前两个事件交替执行。</p>
<p>键盘事件对象由 <code>KeyboardEvent</code> 创建，<code>KeyboardEvent</code> 会提供一下常用属性：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>MouseEvent.shiftKey</code></td>
<td>是否按下辅助键 <code>shift</code> 键</td>
</tr>
<tr>
<td><code>MouseEvent.ctrlKey</code></td>
<td>是否按下辅助键 <code>ctrl</code> 键</td>
</tr>
<tr>
<td><code>MouseEvent.altKey</code></td>
<td>是否按下辅助键 <code>alt</code> 键</td>
</tr>
<tr>
<td><code>code</code></td>
<td>键码</td>
</tr>
<tr>
<td><code>key</code></td>
<td>键值</td>
</tr>
</tbody></table>
<p>有一些其他的键码或键值，比如 <code>keyCode</code>、<code>char</code>、<code>charCode</code>、<code>which</code> 等，它们可能是非标准的或者在新标准中被废弃，不建议使用。</p>
<h3 id="表单事件"><a href="#表单事件" class="headerlink" title="表单事件"></a>表单事件</h3><p><code>form</code> 元素</p>
<table>
<thead>
<tr>
<th>事件名</th>
<th>描述</th>
<th>补充</th>
</tr>
</thead>
<tbody><tr>
<td><code>onsubmit</code></td>
<td>提交表单</td>
<td>当表单内，属性 <code>type=&quot;submit&quot;</code> 的 <code>input</code> 元素或者 <code>button</code> 元素被点击的时触发</td>
</tr>
<tr>
<td><code>onreset</code></td>
<td>重置表单</td>
<td>当表单内，属性 <code>type=&quot;reset&quot;</code> 的 <code>input</code> 元素被点击时触发</td>
</tr>
</tbody></table>
<p><code>input、select、textarea</code> 元素</p>
<table>
<thead>
<tr>
<th>事件名</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>onchange</code></td>
<td>焦点转移后有数据改变时触发</td>
</tr>
<tr>
<td><code>oninput</code></td>
<td>数据改变时触发，低版本 IE 不兼容</td>
</tr>
</tbody></table>
<h3 id="其他事件"><a href="#其他事件" class="headerlink" title="其他事件"></a>其他事件</h3><ul>
<li><p>焦点</p>
<ul>
<li><code>focus</code> 不冒泡</li>
<li><code>blur</code> 不冒泡</li>
</ul>
</li>
<li><p>滚动事件滚轮</p>
<ul>
<li><code>scroll</code> 不冒泡</li>
</ul>
</li>
<li><p>窗口大小变化</p>
<ul>
<li><code>resize</code> 不冒泡</li>
</ul>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/Events">剩余事件查表</a></p>
<h2 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h2><h3 id="主动触发事件"><a href="#主动触发事件" class="headerlink" title="主动触发事件"></a>主动触发事件</h3><p>每个事件都可以主动触发，在元素属性上，有各类事件的触发方法，比如 <code>onclick</code> 事件使用 <code>click</code> 方法触发：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;foo&quot;</span>&gt;</span>click<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">  <span class="hljs-keyword">var</span> foo = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;foo&quot;</span>);</span><br><span class="javascript">  foo.addEventListener(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">    <span class="hljs-keyword">var</span> pEl = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;p&quot;</span>);</span><br><span class="javascript">    pEl.innerText = <span class="hljs-string">&quot;content &quot;</span>;</span><br><span class="javascript">    <span class="hljs-built_in">document</span>.body.appendChild(pEl);</span><br>  &#125;);<br><br><span class="javascript">  <span class="hljs-comment">// 就算不主动点击按钮，每过 1.5 秒也会触发 foo 元素的点击事件</span></span><br><span class="javascript">  <span class="hljs-built_in">setInterval</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br>    foo.click();<br>  &#125;, 1500);<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>所有事件都能主动触发，元素上有各个事件的执行函数。</p>
<h3 id="javascript-协议"><a href="#javascript-协议" class="headerlink" title="javascript 协议"></a>javascript 协议</h3><p>我们的代码可以以内联的方式写在 HTML 元素中，所有的事件都支持 javascript 协议。比如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;javascript:alert(&#x27;what?&#x27;)&quot;</span>&gt;</span>click<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>在 HTML 的事件属性中，<code>javascript:</code> 这个前缀可以省略，于是变成：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;alert(&#x27;what?&#x27;)&quot;</span>&gt;</span>click<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>你甚至可以编写多行代码甚至复杂的语句：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html">&lt;button<br>  id=&quot;foo&quot;<br>  onclick=&quot;<br>    for(var i = 0 ; i &lt; 100;i++)&#123;<br>      console.log(i);<br>    &#125;<br>  &quot;<br>&gt;<br>  click<br><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>现在再来看看 HTML 内联事件绑定的方式：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;foo&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;clickHandle()&quot;</span>&gt;</span>click<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clickHandle</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">    <span class="hljs-comment">// ...</span></span><br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>是不是一目了然了，它其实不是特殊语法，而是点击按钮的时候，执行了一个函数。</p>
<p>javascript 协议不止可以编写到事件上，还可以通过 <code>href</code> 属性放在 <code>a</code> 元素中，在点击链接的时候从而执行 JavaScript 代码，比如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript: alert(1)&quot;</span>&gt;</span>click<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>如果最后一个语句的值不为 <code>undefined</code> 那么页面会展示链接里的内容：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;a href=<span class="hljs-string">&quot;javascript:&#x27;&lt;strong&gt;这里是链接里的内容&lt;/strong&gt;&#x27;&quot;</span>&gt;click&lt;/a&gt;<br></code></pre></td></tr></table></figure>

<p>点击后就出大问题了，页面的没有跳转，但是展示了新的内容，并且不能通过后退键返回上级，只能刷新页面（IE 低版本刷新都没用，需要新建标签页）。</p>
<p>为了防止上述情况发生，在很久很久很久以前，让一个链接无法跳转可以编写以下代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript: void(0);&quot;</span>&gt;</span>click<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>配合 <code>void</code> 关键字，表达式的值永远是 <code>undefined</code>，可以让链接不进行跳转并且不渲染其他内容，你可以在圆括号内编写任何代码而不影响页面。<mark>但是这种方式现在已经不再提倡，因为超链接的语义就是指定一个网络资源的地址，如果为了防止跳转而设置无用的地址，完全是本末倒置。</mark> 这里介绍的原因是很多老旧页面还存在这样的链接，相当于知识点补漏。</p>
<p>如果需要让一个链接无法跳转，应该使用 JS 禁止其默认事件。比如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://www.bilibili.com&quot;</span> <span class="hljs-attr">data-prevent</span>&gt;</span>bilibili<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">  <span class="hljs-built_in">document</span>.body.addEventListener(</span><br><span class="javascript">    <span class="hljs-string">&quot;click&quot;</span>,</span><br><span class="javascript">    <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>&#123;</span><br><span class="javascript">      e = e || <span class="hljs-built_in">window</span>.event;</span><br><span class="javascript">      <span class="hljs-keyword">var</span> target = e.target || e.srcElement;</span><br><span class="javascript">      <span class="hljs-keyword">if</span> (target.hasAttribute(<span class="hljs-string">&quot;data-prevent&quot;</span>)) &#123;</span><br><span class="javascript">        e.returnValue = <span class="hljs-literal">false</span>;</span><br>        e.preventDefault &amp;&amp; e.preventDefault();<br>      &#125;<br>    &#125;,<br><span class="javascript">    <span class="hljs-literal">false</span></span><br>  );<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>上面代码中，设置自定义布尔属性 <code>data-prevent</code> 的元素都会被禁止默认事件，从而让 <code>a</code> 元素无法产生跳转。</p>
<p><mark>备注：非常不提倡把 JavaScript 内联写到 HTML 中。</mark></p>
</div>
  <div class="article-ft">
    <p>
      <span class="last-update">最后更新时间：2021/01/04</span>
    </p>
  </div>
</article>
</main>
    <script>
      $(document).ready(function () {
        $("article table:not(.highlight table)").addClass("table table-hover");
        $("article blockquote").addClass("blockquote");
      });
    </script>
  </body>
</html>
